<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover,
               user-scalable=no">
    <meta name="description" content="Aanandoham's Digital Curiosity - Your complete spiritual growth companion">
    <title>Digital Curiosity - Aanandoham</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js" 
            crossorigin="anonymous" 
            referrerpolicy="no-referrer"></script>

    <!-- Neumorphic Theme Styles -->
    <link rel="stylesheet" href="css/neumorphic-theme.css">

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            800: '#5b21b6',
                            900: '#4c1d95',
                        }
                    }
                }
            }
        }
    </script>
</head>

<body>
    
    <!-- Authentication Screen -->
    <div id="auth-screen">
        <!-- Managed by AuthManager -->
    </div>

    <!-- Main Application Container -->
    <div id="app-container">
        <div id="main-app" class="hidden">
            
            <!-- Navigation gets inserted here by NavigationManager -->

            <!-- Main Content Area -->
            <main id="main-content">
                
                <!-- Dashboard Tab -->
                <div id="dashboard-tab" class="tab-content active">
                    <!-- Managed by DashboardManager -->
                </div>

                <!-- Self Analysis Pro Tab -->
              <div id="calculator-tab" class="tab-content hidden" aria-live="polite">
               <!-- Managed by loader.js -->
              </div>

                <!-- Flip The Script Tab -->
                <div id="flip-script-tab" class="tab-content hidden">
                    <!-- Managed by FlipScriptEngine -->
                </div>

                <!-- Meditations Tab -->
                <div id="meditations-tab" class="tab-content hidden">
                    <!-- Managed by MeditationsEngine -->
                </div>

                <!-- Tarot Tab -->
                <div id="tarot-tab" class="tab-content hidden">
                    <!-- Managed by TarotEngine -->
                </div>

                <!-- Energy Tracking Tab -->
                <div id="energy-tab" class="tab-content hidden">
                    <!-- Managed by EnergyEngine -->
                </div>

                <!-- Happiness Boosters Tab -->
                <div id="happiness-tab" class="tab-content hidden">
                    <!-- Managed by HappinessEngine -->
                </div>

                <!-- Gratitude Journal Tab -->
                <div id="gratitude-tab" class="tab-content hidden">
                    <!-- Managed by GratitudeEngine -->
                </div>

                <!-- Journal Tab -->
                <div id="journal-tab" class="tab-content hidden">
                    <!-- Managed by JournalEngine -->
                </div>

                <!-- Karma Shop Tab -->
                <div id="karma-shop-tab" class="tab-content hidden">
                    <!-- Managed by KarmaShopEngine -->
                </div>

                <!-- Shadow Alchemy Tab -->
                <div id="shadow-alchemy-tab" class="tab-content hidden">
                    <!-- Managed by ShadowAlchemyEngine -->
                </div>

            </main>

            <!-- Global Modals/Overlays -->
            <div id="modal-container">
                <!-- For popups, confirmations, etc. -->
            </div>

            <!-- Audio Player (Fixed Bottom) -->
            <div id="audio-player" class="hidden">
                <!-- Managed by MeditationsEngine -->
            </div>

        </div>
    </div>

    <!-- Loading Indicator -->
    <div id="loading-spinner" class="hidden">
        <div class="loading-spinner-inner">
            <div class="spinner"></div>
            <p class="mt-4">Loading...</p>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

<!-- ============================================ -->
<!-- CONSOLIDATED JAVASCRIPT - ALL ES6 MODULES -->
<!-- ============================================ -->

<!-- Core Utilities -->
<script type="module" src="js/core/utils.js"></script>

<!-- Tarot Engine -->
<script type="module" src="js/engines/TarotEngine.js"></script>

<!-- Gamification Engine -->
<script type="module" src="js/engines/GamificationEngine.js"></script>

<!-- Karma Shop Engine -->
<script type="module" src="js/engines/KarmaShopEngine.js"></script>

<!-- Features Module -->
<script type="module" src="js/engines/energy-engine-enhanced.js"></script>
<script type="module" src="js/core/features.js"></script>

<!-- ============================================ -->
<!-- INITIALIZATION SCRIPT WITH PROPER DATA LOADING -->
<!-- ============================================ -->
<script type="module">
    // Load data FIRST, then initialize app
    async function initializeApp() {
        console.log('ðŸš€ Project Curiosity - Digital Spiritual Platform');
        
        try {
            // 1. Load affirmations data
            const affirmationsModule = await import('./js/data/affirmations.js');
            window.affirmations = affirmationsModule.default;
            console.log('âœ… Affirmations loaded:', Object.keys(window.affirmations).length, 'categories');
            
            // 2. Load quotes data
            const { QUOTES, getRandomQuote, getQuoteOfTheDay } = await import('./js/data/quotes-data.js');
            window.QuotesData = { QUOTES, getRandomQuote, getQuoteOfTheDay };
            console.log('âœ… Quotes loaded');
            
            // 3. Load Core modules
            const Core = await import('./js/core/index.js');
            
            // 4. Initialize the app
            window.app = new Core.ProjectCuriosityApp({
                AppState:           Core.AppState,
                AuthManager:        Core.AuthManager,
                NavigationManager:  Core.NavigationManager,
                DashboardManager:   Core.DashboardManager
            });
            
            window.app.init();
            
        } catch (err) {
            console.error('Failed to initialize app:', err);
        }
    }
    
    // Wait for DOM, then load data and init app
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeApp);
    } else {
        initializeApp();
    }
</script>

</body>
</html>