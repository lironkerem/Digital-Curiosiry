/* =========================================================
   DIGITAL CURIOSITY – MATRIX CODE SKIN
   Apply to <body class="matrix-code">
   COMPLETE: Digital rain + CRT glow + Hacker aesthetic + Dark mode
   FIX: All backgrounds transparent to show Matrix rain throughout
   ========================================================= */

@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

body.matrix-code{
  /* matrix palette - CYBER GREEN */
  --neuro-bg:#0d0208;
  --neuro-bg-lighter:#1a1410;
  --neuro-bg-lightest:#252018;
  --neuro-shadow-dark:#000000;
  --neuro-shadow-darker:#000000;
  --neuro-shadow-light:#1a1410;
  --neuro-highlight:#252018;

  --neuro-text:#00ff41;
  --neuro-text-light:#00cc33;
  --neuro-text-lighter:#00aa2b;
  --neuro-text-dim:#008822;

  --neuro-accent:#00ff41;           /* matrix green */
  --neuro-accent-light:#33ff66;     /* bright matrix green */
  --neuro-accent-dark:#00cc33;      /* darker matrix green */

  /* Matrix gradient colors */
  --neuro-matrix: #00ff41;
  --neuro-matrix-dark: #00cc33;
  --neuro-matrix-light: #33ff66;
  --neuro-matrix-glow: #00ff41;

  --neuro-success:#00ff41;
  --neuro-warning:#ffff00;
  --neuro-error:#ff0055;
  --neuro-info:#00ffff;

  /* CRT glow shadows */
  --shadow-raised:
    0 0 10px rgba(0,255,65,.3),
    0 0 20px rgba(0,255,65,.2),
    inset 0 0 5px rgba(0,255,65,.1);
  --shadow-raised-lg:
    0 0 15px rgba(0,255,65,.4),
    0 0 30px rgba(0,255,65,.3),
    0 0 45px rgba(0,255,65,.2),
    inset 0 0 10px rgba(0,255,65,.15);
  --shadow-raised-hover:
    0 0 20px rgba(0,255,65,.5),
    0 0 40px rgba(0,255,65,.4),
    0 0 60px rgba(0,255,65,.3),
    inset 0 0 10px rgba(0,255,65,.2);
  --shadow-inset:
    inset 0 0 10px rgba(0,255,65,.3),
    inset 0 0 20px rgba(0,0,0,.8);
  --shadow-inset-sm:
    inset 0 0 5px rgba(0,255,65,.2),
    inset 0 0 10px rgba(0,0,0,.6);
  --shadow-inset-lg:
    inset 0 0 15px rgba(0,255,65,.4),
    inset 0 0 30px rgba(0,0,0,.9);
  --shadow-glow:
    0 0 20px rgba(0,255,65,.6),
    0 0 40px rgba(0,255,65,.4),
    0 0 60px rgba(0,255,65,.3),
    0 0 80px rgba(0,255,65,.2);
  --shadow-intense:
    0 0 30px rgba(0,255,65,.8),
    0 0 60px rgba(0,255,65,.6),
    0 0 90px rgba(0,255,65,.4),
    0 4px 20px rgba(0,255,65,.5);
  --shadow-text:
    0 0 5px rgba(0,255,65,.8),
    0 0 10px rgba(0,255,65,.6),
    0 0 15px rgba(0,255,65,.4);

  /* Monospace font */
  font-family: 'Share Tech Mono', 'Courier New', monospace;
}

/* ------  ANIMATIONS  ------ */
@keyframes digitalRain{
  0%{background-position:0 0}
  100%{background-position:0 100vh}
}
@keyframes matrixPulse{
  0%,100%{box-shadow:var(--shadow-raised-lg),var(--shadow-glow)}
  50%{box-shadow:var(--shadow-raised-lg),var(--shadow-intense)}
}
@keyframes crtFlicker{
  0%,100%{opacity:1}
  50%{opacity:.97}
  51%{opacity:1}
  60%{opacity:.98}
}
@keyframes scanline{
  0%{transform:translateY(-100%)}
  100%{transform:translateY(100vh)}
}
@keyframes dataStream{
  0%{transform:translateX(-100%) skewX(-15deg)}
  100%{transform:translateX(200%) skewX(-15deg)}
}
@keyframes glitchShift{
  0%,100%{transform:translate(0)}
  33%{transform:translate(-2px, 1px)}
  66%{transform:translate(2px, -1px)}
}
@keyframes terminalBlink{
  0%,49%{opacity:1}
  50%,100%{opacity:0}
}
@keyframes phosphorGlow{
  0%,100%{text-shadow:var(--shadow-text)}
  50%{text-shadow:0 0 10px rgba(0,255,65,1), 0 0 20px rgba(0,255,65,.8)}
}

@keyframes phosphorGlowRed{
  0%,100%{text-shadow:0 0 5px rgba(255,0,65,.8), 0 0 10px rgba(255,0,65,.6), 0 0 15px rgba(255,0,65,.4)}
  50%{text-shadow:0 0 10px rgba(255,0,65,1), 0 0 20px rgba(255,0,65,.8)}
}

/* ------  BODY BG & DIGITAL RAIN  ------ */
body.matrix-code{
  background:var(--neuro-bg);
  color:var(--neuro-text);
  transition:all var(--transition-slow) cubic-bezier(.4,0,.2,1);
  position:relative;
  overflow-x:hidden;
}

/* Cascading Matrix Code Animation - Background gradient effect only */
body.matrix-code::before{
  content:"";
  position:fixed;
  inset:0;
  z-index:1;
  pointer-events:none;
  opacity:.4;
  background-image:
    linear-gradient(0deg, transparent 0%, rgba(0,255,65,.4) 10%, transparent 20%),
    repeating-linear-gradient(0deg, transparent, transparent 20px, rgba(0,255,65,.2) 20px, rgba(0,255,65,.2) 21px);
  animation:digitalRain 20s linear infinite;
}

/* NOTE: Matrix character cascade is handled by JS (initMatrixRain) at z-index: -1 */

body.matrix-code > *:not(.matrix-bg){position:relative;z-index:2}

/* CRT scanline overlay */
body.matrix-code .scanline-overlay{
  content:"";
  position:fixed;
  inset:0;
  z-index:1;
  pointer-events:none;
  opacity:.05;
  background:linear-gradient(180deg, transparent 0%, rgba(0,255,65,.3) 50%, transparent 100%);
  height:200px;
  animation:scanline 8s linear infinite;
}

/* ------  MAIN CONTAINER - TRANSPARENT BACKGROUND  ------ */
body.matrix-code #main-app,
body.matrix-code .app-container,
body.matrix-code .tab-content,
body.matrix-code .tab-pane,
body.matrix-code .min-h-screen{
  background:transparent !important;
}

/* ------  ACTIVE TAB GRADIENT  ------ */
body.matrix-code .nav-item.active{
  background:rgba(0,255,65,.1);
  color:var(--neuro-matrix);
  border:1px solid var(--neuro-matrix);
  box-shadow:var(--shadow-inset-sm),var(--shadow-glow);
  text-shadow:var(--shadow-text);
  position:relative;
}
body.matrix-code .nav-item.active::after{
  content:"ONLINE █";
  animation:terminalBlink 1s infinite;
  margin-left:4px;
}

/* ------  PRIMARY BTN ACCENT  ------ */
body.matrix-code .btn-primary{
  background:rgba(0,255,65,.05);
  color:var(--neuro-matrix);
  border:2px solid var(--neuro-matrix);
  box-shadow:var(--shadow-glow);
  text-shadow:var(--shadow-text);
  position:relative;
  overflow:hidden;
  font-weight:700;
  letter-spacing:1px;
  text-transform:uppercase;
}
body.matrix-code .btn-primary::before{
  content:">";
  margin-right:8px;
}
body.matrix-code .btn-primary::after{
  content:"";
  position:absolute;
  top:-50%;
  left:-100%;
  width:50%;
  height:200%;
  background:linear-gradient(90deg,transparent,rgba(0,255,65,.4),transparent);
  transform:skewX(-15deg);
}
body.matrix-code .btn-primary:hover::after{
  animation:dataStream 1s ease-in-out;
}
body.matrix-code .btn-primary:hover{
  background:rgba(0,255,65,.15);
  box-shadow:var(--shadow-intense);
  transform:translateY(-2px);
  animation:glitchShift .3s ease-in-out;
}

/* ------  HEADER BAR + CTA FOOTER (all tabs)  ------ */
body.matrix-code .main-header.project-curiosity,
body.matrix-code .app-header,
body.matrix-code #cta-toggle{
  background:rgba(0,255,65,.5);
  border:2px solid var(--neuro-matrix);
  box-shadow:var(--shadow-raised-lg),var(--shadow-glow);
  animation:matrixPulse 6s ease-in-out infinite;
  color:var(--neuro-matrix);
  position:relative;
}
body.matrix-code .main-header.project-curiosity::before,
body.matrix-code .app-header::before,
body.matrix-code #cta-toggle::before{
  content:"";
  position:absolute;
  inset:0;
  background:repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0,255,65,.03) 2px,
    rgba(0,255,65,.03) 4px
  );
  pointer-events:none;
  animation:crtFlicker 3s infinite;
}
body.matrix-code .main-header.project-curiosity h1,
body.matrix-code .main-header.project-curiosity h3,
body.matrix-code .app-header h1,
body.matrix-code .app-header p,
body.matrix-code #cta-toggle .cta-text-group{
  color:var(--neuro-matrix);
  text-shadow:var(--shadow-text);
  font-weight:700;
  letter-spacing:2px;
  animation:phosphorGlow 4s ease-in-out infinite;
}

/* Dark mode override - must come immediately after */
body.matrix-code.dark-mode .main-header.project-curiosity h1,
body.matrix-code.dark-mode .main-header.project-curiosity h3,
body.matrix-code.dark-mode .app-header h1,
body.matrix-code.dark-mode .app-header p,
body.matrix-code.dark-mode #cta-toggle .cta-text-group{
  animation:phosphorGlowRed 4s ease-in-out infinite !important;
}

/* ------  NAV TABS (semi-transparent green background)  ------ */
body.matrix-code .nav-tabs{
  background:rgba(0,255,65,.5);
  border:1px solid var(--neuro-matrix);
  box-shadow:var(--shadow-raised);
}
body.matrix-code .nav-item{
  background:rgba(0,255,65,.05);
  border:1px solid var(--neuro-matrix);
}

/* ------  BUBBLE POPUP (semi-transparent green background)  ------ */
body.matrix-code #bubble-popup{
  background:rgba(0,255,65,.08);
  border:2px solid var(--neuro-matrix);
  box-shadow:var(--shadow-raised-lg),var(--shadow-glow);
}
body.matrix-code #bubble-popup .wellness-tool-btn,
body.matrix-code #bubble-popup button{
  background:rgba(0,255,65,.05);
  border:1px solid var(--neuro-matrix);
}

/* ------  TERMINAL CURSOR EFFECT  ------ */
body.matrix-code .terminal-cursor::after{
  content:"█";
  animation:terminalBlink 1s infinite;
  margin-left:2px;
  color:var(--neuro-matrix);
}

/* ------  CODE BLOCKS / CARDS - TRANSPARENT WITH GLOW BORDERS  ------ */
body.matrix-code .card,
body.matrix-code .neuro-card,
body.matrix-code .dashboard-gamification,
body.matrix-code .dashboard-quest-hub,
body.matrix-code .dashboard-daily-card,
body.matrix-code .dashboard-quote,
body.matrix-code .dashboard-achievements,
body.matrix-code .dashboard-wellness-toolkit{
  background:rgba(13,2,8,.85) !important; /* Semi-transparent dark background */
  border:1px solid rgba(0,255,65,.3);
  box-shadow:var(--shadow-raised),0 0 15px rgba(0,255,65,.2);
  backdrop-filter:blur(10px); /* Blur the Matrix rain behind cards */
}
body.matrix-code .card:hover,
body.matrix-code .neuro-card:hover,
body.matrix-code .dashboard-quest-card:hover{
  border-color:var(--neuro-matrix);
  box-shadow:var(--shadow-raised-hover);
  background:rgba(13,2,8,.95) !important;
}

/* ------  POPUP MENU TITLE  ------ */
body.matrix-code #bubble-popup h3{
  color:var(--neuro-matrix) !important;
  text-shadow:var(--shadow-text);
}

/* ------  INPUTS & FORMS  ------ */
body.matrix-code input,
body.matrix-code textarea,
body.matrix-code select{
  background:rgba(0,255,65,.05);
  border:1px solid var(--neuro-matrix);
  color:var(--neuro-matrix);
  box-shadow:var(--shadow-inset-sm);
}
body.matrix-code input:focus,
body.matrix-code textarea:focus,
body.matrix-code select:focus{
  outline:none;
  border-color:var(--neuro-matrix-light);
  box-shadow:var(--shadow-glow);
}

/* ------  SCROLLBAR  ------ */
body.matrix-code ::-webkit-scrollbar{
  width:12px;
  background:rgba(0,0,0,.8);
}
body.matrix-code ::-webkit-scrollbar-thumb{
  background:var(--neuro-matrix);
  box-shadow:inset 0 0 10px rgba(0,255,65,.5);
}
body.matrix-code ::-webkit-scrollbar-thumb:hover{
  background:var(--neuro-matrix-light);
}

/* ------  RESPONSIVE  ------ */
@media (max-width:768px){
  body.matrix-code{
    --shadow-raised:0 0 8px rgba(0,255,65,.3);
    --shadow-raised-lg:0 0 12px rgba(0,255,65,.4);
  }
}

/* =========================================================
   DARK MODE VARIANT - RED MATRIX THEME
   ========================================================= */

body.matrix-code.dark-mode {
  --neuro-bg:#0d0208;
  --neuro-bg-lighter:#1a1410;
  --neuro-bg-lightest:#252018;
  --neuro-shadow-dark:#000000;
  --neuro-shadow-darker:#000000;
  --neuro-shadow-light:#1a1410;
  --neuro-highlight:#252018;

  --neuro-text:#ff0041;
  --neuro-text-light:#cc0033;
  --neuro-text-lighter:#aa002b;
  --neuro-text-dim:#880022;

  --neuro-accent:#ff0041;
  --neuro-accent-light:#ff3366;
  --neuro-accent-dark:#cc0033;

  --neuro-matrix: #ff0041;
  --neuro-matrix-dark: #cc0033;
  --neuro-matrix-light: #ff3366;
  --neuro-matrix-glow: #ff0041;

  --neuro-success:#ff0041;
  --neuro-warning:#ffff00;
  --neuro-error:#ff0055;
  --neuro-info:#00ffff;

  --shadow-raised:
    0 0 10px rgba(255,0,65,.3),
    0 0 20px rgba(255,0,65,.2),
    inset 0 0 5px rgba(255,0,65,.1);
  --shadow-raised-lg:
    0 0 15px rgba(255,0,65,.4),
    0 0 30px rgba(255,0,65,.3),
    0 0 45px rgba(255,0,65,.2),
    inset 0 0 10px rgba(255,0,65,.15);
  --shadow-raised-hover:
    0 0 20px rgba(255,0,65,.5),
    0 0 40px rgba(255,0,65,.4),
    0 0 60px rgba(255,0,65,.3),
    inset 0 0 10px rgba(255,0,65,.2);
  --shadow-inset:
    inset 0 0 10px rgba(255,0,65,.3),
    inset 0 0 20px rgba(0,0,0,.8);
  --shadow-inset-sm:
    inset 0 0 5px rgba(255,0,65,.2),
    inset 0 0 10px rgba(0,0,0,.6);
  --shadow-inset-lg:
    inset 0 0 15px rgba(255,0,65,.4),
    inset 0 0 30px rgba(0,0,0,.9);
  --shadow-glow:
    0 0 20px rgba(255,0,65,.6),
    0 0 40px rgba(255,0,65,.4),
    0 0 60px rgba(255,0,65,.3),
    0 0 80px rgba(255,0,65,.2);
  --shadow-intense:
    0 0 30px rgba(255,0,65,.8),
    0 0 60px rgba(255,0,65,.6),
    0 0 90px rgba(255,0,65,.4),
    0 4px 20px rgba(255,0,65,.5);
  --shadow-text:
    0 0 5px rgba(255,0,65,.8),
    0 0 10px rgba(255,0,65,.6),
    0 0 15px rgba(255,0,65,.4);
}

body.matrix-code.dark-mode::before{
  background-image:
    linear-gradient(0deg, transparent 0%, rgba(255,0,65,.4) 10%, transparent 20%),
    repeating-linear-gradient(0deg, transparent, transparent 20px, rgba(255,0,65,.2) 20px, rgba(255,0,65,.2) 21px);
}

body.matrix-code.dark-mode .scanline-overlay{
  background:linear-gradient(180deg, transparent 0%, rgba(255,0,65,.3) 50%, transparent 100%);
}

body.matrix-code.dark-mode .card,
body.matrix-code.dark-mode .neuro-card,
body.matrix-code.dark-mode .dashboard-gamification,
body.matrix-code.dark-mode .dashboard-quest-hub,
body.matrix-code.dark-mode .dashboard-daily-card,
body.matrix-code.dark-mode .dashboard-quote,
body.matrix-code.dark-mode .dashboard-achievements,
body.matrix-code.dark-mode .dashboard-wellness-toolkit,
body.matrix-code.dark-mode .karma-shop-balance,
body.matrix-code.dark-mode .karma-shop-item{
  background:rgba(13,2,8,.85) !important;
  border:1px solid rgba(255,0,65,.3);
  box-shadow:var(--shadow-raised),0 0 15px rgba(255,0,65,.2);
}

body.matrix-code.dark-mode .card:hover,
body.matrix-code.dark-mode .neuro-card:hover,
body.matrix-code.dark-mode .dashboard-quest-card:hover,
body.matrix-code.dark-mode .wellness-tool-btn:hover,
body.matrix-code.dark-mode .karma-shop-item:hover{
  border-color:var(--neuro-matrix);
  box-shadow:var(--shadow-raised-hover);
  background:rgba(13,2,8,.95) !important;
}

body.matrix-code.dark-mode .nav-item.active{
  background:rgba(255,0,65,.1);
  box-shadow:var(--shadow-inset-sm),var(--shadow-glow);
}

body.matrix-code.dark-mode .btn-primary{
  background:rgba(255,0,65,.05);
  box-shadow:var(--shadow-glow);
}

body.matrix-code.dark-mode .btn-primary:hover{
  background:rgba(255,0,65,.15);
  box-shadow:var(--shadow-intense);
}

body.matrix-code.dark-mode .main-header.project-curiosity,
body.matrix-code.dark-mode .app-header,
body.matrix-code.dark-mode #cta-toggle{
  background:rgba(255,0,65,.5);
}

body.matrix-code.dark-mode .nav-tabs{
  background:rgba(255,0,65,.5);
}

body.matrix-code.dark-mode ::-webkit-scrollbar-thumb{
  background:var(--neuro-matrix);
  box-shadow:inset 0 0 10px rgba(255,0,65,.5);
}

/* Red Matrix cascade for dark mode - targets JS-generated columns */
body.matrix-code.dark-mode .matrix-column{
  color:#ff0041 !important;
  text-shadow:
    0 0 10px rgba(255,0,65,1),
    0 0 20px rgba(255,0,65,.6) !important;
}
/* =====  CHAT-WINDOW TOKENS  (append to each skin file)  ===== */
body.matrix-code{
  --chat-bg:rgba(37,32,24,.9);
  --chat-header-bg:rgba(45,40,30,.95);
  --chat-border:1px solid rgba(0,255,65,.3);
  --chat-text:var(--neuro-text);
  --chat-accent:var(--neuro-accent);
  --chat-shadow:var(--shadow-raised-lg);
  --chat-inset:var(--shadow-inset);
  font-family:'Share Tech Mono',monospace;
  --chat-bot-bubble:rgba(20,15,10,.95);
  --chat-bot-text:#33ff66 0.95rem 500 'Share Tech Mono','Courier New',monospace;
  --chat-bg-light:rgba(20,15,10,.95);
  --chat-bg-disabled:rgba(45,40,30,.95);
}
body.matrix-code.dark-mode{--chat-border:1px solid rgba(255,0,65,.3);}
/* =========================================================
   END MATRIX-CODE COMPLETE
   ✓ Digital rain cascade visible throughout (handled by JS at z-index: -1)
   ✓ All content backgrounds semi-transparent with backdrop-filter blur
   ✓ CRT monitor glow & scanlines
   ✓ Monospace terminal font
   ✓ Phosphor green on black (light mode)
   ✓ Phosphor red on black (dark mode)
   ✓ Glitch & flicker animations
   ✓ Hacker/cyber aesthetic
   ========================================================= */